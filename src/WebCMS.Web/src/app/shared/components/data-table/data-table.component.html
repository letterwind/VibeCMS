<div class="data-table">
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead class="table-light">
        <tr>
          <th
            *ngFor="let col of columns"
            [style.width]="col.width"
            [class.sortable]="col.sortable"
            (click)="col.sortable && onSortClick(col.key)"
          >
            {{ col.header }}
            <i
              *ngIf="col.sortable && sortColumn === col.key"
              [class]="
                sortDirection === 'asc' ? 'bi bi-sort-up' : 'bi bi-sort-down'
              "
            ></i>
          </th>
          <th *ngIf="showActions" class="table-actions" style="width: 120px">
            操作
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of data">
          <td *ngFor="let col of columns">{{ item[col.key] }}</td>
          <td *ngIf="showActions" class="table-actions">
            <button
              class="btn btn-sm btn-outline-primary me-1"
              (click)="onAction('edit', item)"
              title="編輯"
            >
              <i class="bi bi-pencil"></i>
            </button>
            <button
              class="btn btn-sm btn-outline-danger"
              (click)="onAction('delete', item)"
              title="刪除"
            >
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
        <tr *ngIf="data.length === 0">
          <td
            [attr.colspan]="columns.length + (showActions ? 1 : 0)"
            class="text-center text-muted py-4"
          >
            暫無資料
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div
    class="d-flex justify-content-between align-items-center mt-3"
    *ngIf="pagination"
  >
    <div class="text-muted">
      共 {{ pagination.totalCount }} 筆資料，第 {{ pagination.pageNumber }} /
      {{ pagination.totalPages }} 頁
    </div>
    <nav>
      <ul class="pagination mb-0">
        <li class="page-item" [class.disabled]="pagination.pageNumber === 1">
          <a class="page-link" (click)="goToPage(1)">
            <i class="bi bi-chevron-double-left"></i>
          </a>
        </li>
        <li class="page-item" [class.disabled]="pagination.pageNumber === 1">
          <a class="page-link" (click)="goToPage(pagination.pageNumber - 1)">
            <i class="bi bi-chevron-left"></i>
          </a>
        </li>
        <li
          class="page-item"
          *ngFor="let page of visiblePages"
          [class.active]="page === pagination.pageNumber"
        >
          <a class="page-link" (click)="goToPage(page)">{{ page }}</a>
        </li>
        <li
          class="page-item"
          [class.disabled]="pagination.pageNumber === pagination.totalPages"
        >
          <a class="page-link" (click)="goToPage(pagination.pageNumber + 1)">
            <i class="bi bi-chevron-right"></i>
          </a>
        </li>
        <li
          class="page-item"
          [class.disabled]="pagination.pageNumber === pagination.totalPages"
        >
          <a class="page-link" (click)="goToPage(pagination.totalPages)">
            <i class="bi bi-chevron-double-right"></i>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>
